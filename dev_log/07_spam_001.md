# Subunit 7.1: Database Analysis & Rule Extraction

## Objective

Analyze production database to identify spam patterns and create detection rules.

## Steps

1. **Copy Production Database**
   - Get `builderfeed.db` from Raspberry Pi
   - Place in `data/builderfeed.db`

2. **Query Articles**
   - Extract all articles with: title, description, tags, author_name, author_alias
   - Separate posted vs unposted articles
   - Get article counts and date ranges

3. **Identify Spam Patterns**
   - Review articles with human input
   - Look for patterns in:
     - Title keywords/phrases
     - Author names/aliases
     - Tag patterns
     - Description content
     - Title length/format
     - URL patterns

4. **Document Spam Characteristics**
   - List common spam indicators
   - Note edge cases
   - Identify false positive risks

5. **Create Rule Set**
   - Define detection rules based on patterns
   - Prioritize high-confidence rules
   - Document rule rationale

## Expected Patterns to Check

- Promotional keywords (e.g., "buy", "discount", "limited offer")
- Suspicious author patterns
- Repetitive titles
- Unusual tag combinations
- Short/generic descriptions
- Non-technical content

## Output

Document with:
- Spam pattern analysis
- List of detection rules
- Example spam articles
- Rule confidence levels

## AI Interactions

Use AI to:
1. Query database and format results
2. Analyze patterns in article data
3. Suggest rule structures
4. Create initial spam_rules.json

## Files Created

- `dev_log/07_spam_001.md` (this file)
- Analysis notes (embedded in this file)

## Status: Complete

**Database Analysis Complete**

### Database Stats
- Total articles: 436
- Posted articles: 284
- Unposted articles: 152

### Spam Patterns Identified

#### 1. **Airline Customer Service Spam** (Primary Pattern)
Articles about contacting airlines (Delta, Lufthansa, KLM, LATAM, Copa, American Airlines, Turkish Airlines, etc.)

**Characteristics:**
- Titles in Spanish, French, Italian asking "How to contact/call [airline]"
- Keywords: "c√≥mo llamar", "comment joindre", "come contattare", "tel√©fono", "WhatsApp", "customer service"
- Special characters in titles: „Äê„Äë, ^^, *, ~, ‚úàÔ∏è, üìû
- Empty or generic tags (or spam tags like "agentic-ai,advertising-marketing-industry")
- High-volume authors

**Spam Authors:**
- steve196 (24 articles) - Lufthansa, Delta spam
- expediacustomer (20 articles) - Expedia spam
- airsline (17 articles) - LATAM, Copa, KLM spam
- dddds (9 articles) - Aerom√©xico, Lufthansa, Wingo spam
- oliviadosan (8 articles) - Delta, Turkish Airlines, Booking.com spam
- ladoo123 (8 articles) - Copa, American Airlines spam
- lucyriver (7 articles) - American Airlines Italy spam
- jamessmithstr (5 articles) - Netflix customer service spam

#### 2. **Booking/Travel Service Spam**
- Expedia, Booking.com customer service
- Similar patterns to airline spam

#### 3. **Netflix Customer Service Spam**
- "How to contact Netflix", "How to cancel Netflix"
- Author: jamessmithstr

#### 4. **Marketing/SEO Spam**
- "A Comprehensive Guide to Modern Digital Marketing Solutions"
- Generic marketing content unrelated to AWS

### Legitimate Article Patterns

**Characteristics:**
- Technical AWS content (EKS, Lambda, CDK, Bedrock, etc.)
- Proper technical tags (amazon-eks, serverless, aws-lambda, etc.)
- Authors with consistent technical content
- English titles with technical terminology
- No special characters or promotional language

**Legitimate Authors:**
- prithivi, tuni56, edtech, jumic, razeen, cremich, aurora75, waz, etc.

### Spam Detection Rules

#### High Confidence Rules:
1. **Airline keywords** in title: "lufthansa", "delta", "klm", "latam", "copa", "american airlines", "turkish airlines", "aerom√©xico", "jetblue", "volaris", "wingo", "iberia", "air france", "air canada"
2. **Contact phrases**: "c√≥mo llamar", "comment joindre", "come contattare", "how to contact", "customer service", "tel√©fono", "whatsapp", "n√∫mero"
3. **Special characters** in title: „Äê„Äë, ^^, *, ~, ‚úàÔ∏è, üìû, „Äå„Äç
4. **Known spam authors**: steve196, expediacustomer, airsline, dddds, oliviadosan, ladoo123, lucyriver, jamessmithstr, tanishatech, etc.
5. **Booking/travel services**: "expedia", "booking.com", "netflix"
6. **Empty tags** + non-technical title
7. **Generic spam tags**: "advertising-marketing-industry" + airline/service keywords

#### Medium Confidence Rules:
1. Non-English title (Spanish/French/Italian) + no technical AWS terms
2. Question format about customer service
3. Multiple special characters in title

### Rule Recommendations

**Immediate blocking (high confidence):**
- Any article with airline names + contact keywords
- Known spam author aliases
- Netflix/Expedia/Booking.com customer service content
- Titles with „Äê„Äë, ^^, ‚úàÔ∏è, üìû characters

**Review/flag (medium confidence):**
- Non-English titles without AWS technical terms
- Empty tags + promotional language
- "Digital marketing" or "SEO" in title

### False Positive Risk: Very Low
- Legitimate AWS Builder articles are technical, in English, with proper tags
- No overlap between spam patterns and legitimate content
- Spam is clearly customer service/travel related, not AWS technical content
